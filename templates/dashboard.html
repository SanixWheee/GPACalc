{% extends "base.html" %} {% block content %}

<link rel = "stylesheet"
          href = "https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"/>
<div class = "dashboard-container">
    <div class="left-widget visible">
      <div class = "table-div">
      <script>
          function redirect(url) {
              window.location.href = url;
          }
      </script>
        {% for grade, classes in classes_by_grade.items() %}
            <h1 class = "grade-label">{{ grade }}th Grade</h1>
            <table class = "{{ grade }} grades">
                <tr>
                <th>Class     </th>
                <th>Grade     </th>
                <th>Credits     </th>
                </tr>
                {% for class in classes %}
                <tr>
                    <td>{{class.full_name()}}</td>
                    <td>{{class.received_grade}}</td>
                    <td>{{class.credits}}</td>
                    <td style="border: none">
                        <span class = "material-symbols-outlined delete" id = "delete-button" onclick="redirect('{{ url_for('dashboard.delete_class', class_id=class.id) }}')">delete</span>
                    </td>
                </tr>
                {% endfor %}
            </table>
        {% endfor %}
      </div>
    </div>
    <div class="right-widgets">
      <div class = "class-widget visible">
        <h1 class = "add-label">Add Classes</h1> <!--                                      update the 'add a class' text on submission-->
        <form id = "add-class" action="{{ url_for('dashboard.dashboard') }}" method="POST" onsubmit="toggleVisibility()">

              <input type = 'text' id = 'class' class = "enter" name = 'name' placeholder="Enter the class name" list="possibleClasses" required>
              <datalist id="possibleClasses">
                  {% for cls in all_classes %}
                  <option>{{ cls }}</option>
                  {% endfor %}
              </datalist>
              <br>
              <select class = "grade dropdown" id="grade" name = "received_grade" required>
                <option value = "" disabled selected class = "initChoice">Class grade</option>
                <option value="A">A</option>
                <option value="B+">B+</option>
                <option value="B">B</option>
                <option value="B-">B-</option>
                <option value="C+">C+</option>
                <option value="C">C</option>
                <option value="C-">C-</option>
                <option value="N">N</option>
              </select>
              <br>
              <input type = 'text' id = 'credits' class = "enter" name = 'credits', placeholder="Enter credits">
              <br>
              <!-- <label for = "year" class = "dropdownLabel">Year Taken:</label> -->
              <select class = "year dropdown" id="year" name = "grade_taken" required>
                <option value = "" disabled selected class = "initChoice">Year</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
              </select>
              <br>
              <!-- <label for = "type" class = "dropdownLabel">Class Type:</label> -->
              <select class = "type dropdown" id="type" name = "type" required>
                <option value = "" disabled selected class = "initChoice">Class Type</option>
                <option value="">Normal</option>
                <option value="AP">AP</option>
                <option value="Honors">Honors</option>
              </select>
              <br>
              <button type="submit" class="submit-button">Add Class</button>

        </form>
      </div>

      <div class = "bottom-widget visible">
        <h1 class = "info-label">Your Report</h1>
        {% if has_classes %}
          <h2 class="gpa-text">Unweighted GPA: {{ unweighted_gpa }}</h2>
          <h2 class="gpa-text">Weighted GPA: {{ weighted_gpa }}</h2>
          <!-- prettier-ignore -->
          <a class = "getPDF" href = "{{ url_for('dashboard.download_report') }}">Download PDF</a>
    {% endif %}
      </div>
    </div>
</div>


<script>
    const leftWidget = document.querySelector('.left-widget');
    const table = document.querySelector('.table-div');
    const bottomWidget = document.querySelector('.bottom-widget');
    const classWidget = document.querySelector('.class-widget');

    window.onload = function () {
        if(table.getElementsByTagName('table').length < 1){
            classWidget.classList.remove('visible');
            leftWidget.classList.remove('visible');
            bottomWidget.classList.remove('visible');
        }else{

            leftWidget.classList.add('visible');
            bottomWidget.classList.add('visible');
            classWidget.classList.add('visible');

        }
    };

/*
    document.addEventListener('click', function(event) {
        classWidget.classList.remove('visible');
        leftWidget.classList.remove('visible');
        bottomWidget.classList.remove('visible');
    });
*/

</script>

    {% if tutorial_status == TutorialStatus.PART_ONE %}
         code goes here for first half
    {% elif tutorial_status == TutorialStatus.PART_TWO %}
        code goes here for second half
    {% endif %}

{% endblock %}
